{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/loel/Documents/loel-blog/pages/post/[id]/index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction _templateObject21() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 1.2rem;\\n  line-height: 1.5;\\n\"]);\n\n  _templateObject21 = function _templateObject21() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject20() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 0.875rem;\\n  color: #8a8a8a;\\n\"]);\n\n  _templateObject20 = function _templateObject20() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject19() {\n  var data = _taggedTemplateLiteral([\"\\n  font-weight: 600;\\n  margin-bottom: 5px;\\n\"]);\n\n  _templateObject19 = function _templateObject19() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject18() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  margin-bottom: 1.5rem;\\n\"]);\n\n  _templateObject18 = function _templateObject18() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject17() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  margin-bottom: 1.5rem;\\n  padding-bottom: 1.5rem;\\n  border-bottom: 1px solid #efefef;\\n\"]);\n\n  _templateObject17 = function _templateObject17() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject16() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 0;\\n  padding: 2px 10px;\\n  height: 38px;\\n  font-size: 1rem;\\n  color: #4c4c4c;\\n  line-height: 1.2;\\n  \", \"\\n\\n  + input {\\n    margin-left: 1rem;\\n  }\\n\"]);\n\n  _templateObject16 = function _templateObject16() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject15() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-bottom: 1rem;\\n\"]);\n\n  _templateObject15 = function _templateObject15() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject14() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 1.5rem 0 3rem;\\n\"]);\n\n  _templateObject14 = function _templateObject14() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: flex-end;\\n\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-bottom: 1rem;\\n  padding: 0.625rem;\\n  width: 100%;\\n  min-height: 5rem;\\n  font-size: 1rem;\\n  line-height: 1.75;\\n  \", \"\\n  resize: none;\\n\"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 0.5rem 0.5rem 1rem;\\n  font-weight: 500;\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n  padding-bottom: 2rem;\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-left: auto;\\n\\n  button + button {\\n    margin-left: 0.5rem;\\n  }\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 1rem;\\n\\n  img {\\n    display: block;\\n    max-width: 768px;\\n  }\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-right: 10px;\\n  font-weight: 600;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  font-size: 1rem;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 2.5rem;\\n  line-height: 1.5;\\n  font-weight: 800;\\n  color: #313131;\\n  word-break: keep-all;\\n  margin-bottom: 2rem;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  margin-bottom: 1rem;\\n  padding-bottom: 2rem;\\n  border-bottom: 1px solid #eee;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%;\\n  padding: 2rem 0;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  border: 1px solid #e4e4e4;\\n  border-radius: 4px;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from \"react\";\nimport styled from \"styles/styled\";\nimport { DefaultLayout } from \"layouts\";\nimport { useRouter } from \"next/router\";\nimport Head from \"next/head\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"@toast-ui/editor/dist/toastui-editor.css\";\nimport { Button } from \"styles\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { REMOVE_POST, CREATE_COMMENT, GET_COMMENTS, GET_ALL_POSTS } from \"@api/Post\";\nimport \"prismjs/themes/prism.css\";\nimport { decodeHTMLForHeader, dateDisplay } from \"@utils/common\";\nimport { css } from \"@emotion/core\";\n\nvar Post = function Post(_ref) {\n  _s();\n\n  var authority = _ref.authority,\n      post = _ref.post;\n  var router = useRouter();\n\n  if (router.isFallback) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 12\n    }, _this);\n  }\n\n  var id = post.id.toString();\n\n  var _useState = useState(null),\n      comments = _useState[0],\n      setComments = _useState[1];\n\n  var _useState2 = useState({\n    name: \"\",\n    password: \"\",\n    contents: \"\",\n    \"class\": 0\n  }),\n      comment = _useState2[0],\n      setComment = _useState2[1];\n\n  useQuery(GET_COMMENTS, {\n    fetchPolicy: \"cache-first\",\n    variables: {\n      postId: id\n    },\n    onCompleted: function onCompleted(data) {\n      setComments(data.getComments);\n    }\n  });\n\n  var _useMutation = useMutation(REMOVE_POST, {\n    refetchQueries: [{\n      query: GET_ALL_POSTS\n    }],\n    onCompleted: function onCompleted() {\n      router.push(\"/\");\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      RemovePostMutation = _useMutation2[0];\n\n  var pushEditPage = function pushEditPage() {\n    router.push(\"/edit?id=\".concat(id));\n  };\n\n  var remove = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return RemovePostMutation({\n                variables: {\n                  id: id\n                }\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function remove() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var autoIncreaseHeight = function autoIncreaseHeight(event) {\n    var target = event.target;\n    target.style.height = \"\".concat(target.scrollHeight + 2, \"px\");\n  };\n\n  var handleCommentInput = function handleCommentInput(event) {\n    var _event$target = event.target,\n        name = _event$target.name,\n        value = _event$target.value;\n    setComment(_objectSpread(_objectSpread({}, comment), {}, _defineProperty({}, name, value)));\n  };\n\n  var _useMutation3 = useMutation(CREATE_COMMENT, {\n    refetchQueries: [{\n      query: GET_COMMENTS,\n      variables: {\n        postId: id\n      }\n    }],\n    awaitRefetchQueries: true,\n    update: function update(store, _ref3) {\n      var createComment = _ref3.data.createComment;\n      var newComments = comments ? [createComment].concat(_toConsumableArray(comments)) : null;\n      setComments(newComments);\n    },\n    onCompleted: function onCompleted() {\n      setComment({\n        name: \"\",\n        password: \"\",\n        contents: \"\",\n        \"class\": 0\n      });\n    }\n  }),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      CreateCommentMutation = _useMutation4[0];\n\n  var registerComment = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var name, password, contents, user;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              name = comment.name, password = comment.password, contents = comment.contents;\n\n              if (name) {\n                _context2.next = 4;\n                break;\n              }\n\n              alert(\"닉네임을 입력해주세요.\");\n              return _context2.abrupt(\"return\");\n\n            case 4:\n              if (password) {\n                _context2.next = 7;\n                break;\n              }\n\n              alert(\"비밀번호를 입력해주세요.\");\n              return _context2.abrupt(\"return\");\n\n            case 7:\n              if (contents) {\n                _context2.next = 10;\n                break;\n              }\n\n              alert(\"댓글 내용을 입력해주세요.\");\n              return _context2.abrupt(\"return\");\n\n            case 10:\n              user = JSON.parse(localStorage.getItem(\"user\"));\n              _context2.next = 13;\n              return CreateCommentMutation({\n                variables: {\n                  comment: comment,\n                  postId: id,\n                  email: user && user.email ? user.email : \"\"\n                }\n              });\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function registerComment() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"canonical\",\n        href: \"https://www.loelblog.com/post/\".concat(id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"title\",\n        content: \"Loel's Blog \".concat(post ? \" - \" + post.title : \"\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"description\",\n        content: decodeHTMLForHeader(post ? post.html : \"음식과 여행을 좋아하는 개발자의 블로그 입니다.\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"og:title\",\n        content: \"Loel's Blog \".concat(post ? \" - \" + post.title : \"\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"og:type\",\n        content: \"article\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"og:url\",\n        content: \"https://www.loelblog.com/post/\".concat(id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"og:description\",\n        content: decodeHTMLForHeader(post ? post.html : \"음식과 여행을 좋아하는 개발자의 블로그 입니다.\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"og:image\",\n        content: \"https://images.loelblog.com/thumb/background.jpg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Loel's Blog \".concat(post ? \" - \" + post.title : \"\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, _this), post && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(PostWrap, {\n        children: [/*#__PURE__*/_jsxDEV(HeadWrap, {\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            children: post.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(InfoWrap, {\n            children: [/*#__PURE__*/_jsxDEV(Author, {\n              children: post.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(CreatedAt, {\n              children: dateDisplay(post.updatedAt)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 17\n            }, _this), authority && /*#__PURE__*/_jsxDEV(EditWrap, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: pushEditPage,\n                variant: \"warning\",\n                children: \"\\uC218\\uC815\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: remove,\n                variant: \"danger\",\n                children: \"\\uC0AD\\uC81C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(ContentWrap, {\n          className: \"tui-editor-contents\",\n          dangerouslySetInnerHTML: {\n            __html: post.html2 ? post.html2 : post.html\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(CommentRegisterWrap, {\n        children: [/*#__PURE__*/_jsxDEV(TotalComment, {\n          children: [\"\\uB313\\uAE00 \", comments ? comments.length : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(CommentWriterWrap, {\n            children: [/*#__PURE__*/_jsxDEV(CommentWriterInput, {\n              name: \"name\",\n              maxLength: 40,\n              value: comment.name,\n              onChange: handleCommentInput,\n              placeholder: \"닉네임\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(CommentWriterInput, {\n              name: \"password\",\n              maxLength: 40,\n              value: comment.password,\n              onChange: handleCommentInput,\n              placeholder: \"비밀번호\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(InputComment, {\n            name: \"contents\",\n            value: comment.contents,\n            onChange: handleCommentInput,\n            onInput: autoIncreaseHeight,\n            placeholder: \"댓글을 남겨주세요.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(CommentRegisterButton, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"success\",\n              width: 120,\n              height: 40,\n              onClick: registerComment,\n              children: \"\\uB313\\uAE00 \\uC791\\uC131\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(CommentsWrap, {\n        children: comments && comments.length > 0 && comments.map(function (item) {\n          return /*#__PURE__*/_jsxDEV(CommentWrap, {\n            children: [/*#__PURE__*/_jsxDEV(CommentInfoWrap, {\n              children: [/*#__PURE__*/_jsxDEV(CommentWriterName, {\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 23\n              }, _this), /*#__PURE__*/_jsxDEV(CommentCreatedAt, {\n                children: dateDisplay(item.createdAt)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 23\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 21\n            }, _this), /*#__PURE__*/_jsxDEV(Comment, {\n              children: item.contents\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 21\n            }, _this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 19\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true)]\n  }, void 0, true);\n};\n\n_s(Post, \"exH5pQCmU8BUM9WX8XEWbws/hac=\", false, function () {\n  return [useRouter, useQuery, useMutation, useMutation];\n});\n\n_c = Post;\nexport var __N_SSG = true;\nexport default _c2 = DefaultLayout(Post);\nvar Border = css(_templateObject());\nvar PostWrap = styled.section(_templateObject2());\n_c3 = PostWrap;\nvar HeadWrap = styled.div(_templateObject3());\n_c4 = HeadWrap;\nvar Title = styled.h1(_templateObject4());\n_c5 = Title;\nvar InfoWrap = styled.div(_templateObject5());\n_c6 = InfoWrap;\nvar Author = styled.span(_templateObject6());\n_c7 = Author;\nvar CreatedAt = styled.span(_templateObject7());\n_c8 = CreatedAt;\nvar ContentWrap = styled.article(_templateObject8());\n_c9 = ContentWrap;\nvar EditWrap = styled.div(_templateObject9());\n_c10 = EditWrap;\nvar CommentRegisterWrap = styled.div(_templateObject10());\n_c11 = CommentRegisterWrap;\nvar TotalComment = styled.div(_templateObject11());\n_c12 = TotalComment;\nvar InputComment = styled.textarea(_templateObject12(), Border);\n_c13 = InputComment;\nvar CommentRegisterButton = styled.div(_templateObject13());\n_c14 = CommentRegisterButton;\nvar CommentsWrap = styled.div(_templateObject14());\n_c15 = CommentsWrap;\nvar CommentWriterWrap = styled.div(_templateObject15());\n_c16 = CommentWriterWrap;\nvar CommentWriterInput = styled.input(_templateObject16(), Border);\n_c17 = CommentWriterInput;\nvar CommentWrap = styled.div(_templateObject17());\n_c18 = CommentWrap;\nvar CommentInfoWrap = styled.div(_templateObject18());\n_c19 = CommentInfoWrap;\nvar CommentWriterName = styled.div(_templateObject19());\n_c20 = CommentWriterName;\nvar CommentCreatedAt = styled.div(_templateObject20());\n_c21 = CommentCreatedAt;\nvar Comment = styled.div(_templateObject21());\n_c22 = Comment;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22;\n\n$RefreshReg$(_c, \"Post\");\n$RefreshReg$(_c2, \"%default%\");\n$RefreshReg$(_c3, \"PostWrap\");\n$RefreshReg$(_c4, \"HeadWrap\");\n$RefreshReg$(_c5, \"Title\");\n$RefreshReg$(_c6, \"InfoWrap\");\n$RefreshReg$(_c7, \"Author\");\n$RefreshReg$(_c8, \"CreatedAt\");\n$RefreshReg$(_c9, \"ContentWrap\");\n$RefreshReg$(_c10, \"EditWrap\");\n$RefreshReg$(_c11, \"CommentRegisterWrap\");\n$RefreshReg$(_c12, \"TotalComment\");\n$RefreshReg$(_c13, \"InputComment\");\n$RefreshReg$(_c14, \"CommentRegisterButton\");\n$RefreshReg$(_c15, \"CommentsWrap\");\n$RefreshReg$(_c16, \"CommentWriterWrap\");\n$RefreshReg$(_c17, \"CommentWriterInput\");\n$RefreshReg$(_c18, \"CommentWrap\");\n$RefreshReg$(_c19, \"CommentInfoWrap\");\n$RefreshReg$(_c20, \"CommentWriterName\");\n$RefreshReg$(_c21, \"CommentCreatedAt\");\n$RefreshReg$(_c22, \"Comment\");","map":{"version":3,"sources":["/Users/loel/Documents/loel-blog/pages/post/[id]/index.tsx"],"names":["React","useState","styled","DefaultLayout","useRouter","Head","Button","useQuery","useMutation","REMOVE_POST","CREATE_COMMENT","GET_COMMENTS","GET_ALL_POSTS","decodeHTMLForHeader","dateDisplay","css","Post","authority","post","router","isFallback","id","toString","comments","setComments","name","password","contents","comment","setComment","fetchPolicy","variables","postId","onCompleted","data","getComments","refetchQueries","query","push","RemovePostMutation","pushEditPage","remove","autoIncreaseHeight","event","target","style","height","scrollHeight","handleCommentInput","value","awaitRefetchQueries","update","store","createComment","newComments","CreateCommentMutation","registerComment","alert","user","JSON","parse","localStorage","getItem","email","title","html","updatedAt","__html","html2","length","map","item","createdAt","Border","PostWrap","section","HeadWrap","div","Title","h1","InfoWrap","Author","span","CreatedAt","ContentWrap","article","EditWrap","CommentRegisterWrap","TotalComment","InputComment","textarea","CommentRegisterButton","CommentsWrap","CommentWriterWrap","CommentWriterInput","input","CommentWrap","CommentInfoWrap","CommentWriterName","CommentCreatedAt","Comment"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { GetServerSidePropsContext } from \"next\";\nimport styled from \"styles/styled\";\nimport { DefaultLayout } from \"layouts\";\nimport { useRouter } from \"next/router\";\nimport Head from \"next/head\";\n\nimport \"codemirror/lib/codemirror.css\";\nimport \"@toast-ui/editor/dist/toastui-editor.css\";\nimport { Button } from \"styles\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { REMOVE_POST, CREATE_COMMENT, GET_COMMENTS, GET_ALL_POSTS } from \"@api/Post\";\nimport \"prismjs/themes/prism.css\";\nimport { decodeHTMLForHeader, dateDisplay } from \"@utils/common\";\nimport { css } from \"@emotion/core\";\nimport service from \"@utils/service\";\n\ninterface Props extends GetServerSidePropsContext {\n  authority: boolean;\n  authenticated: (state: boolean) => void;\n}\n\nconst Post = ({ authority, post }: any) => {\n  const router = useRouter();\n\n  if (router.isFallback) {\n    return <div>Loading...</div>;\n  }\n\n  const id = post.id.toString();\n\n  const [comments, setComments] = useState<IComments[] | null>(null);\n  const [comment, setComment] = useState<IWriteComment>({ name: \"\", password: \"\", contents: \"\", class: 0 });\n\n  useQuery(GET_COMMENTS, {\n    fetchPolicy: \"cache-first\",\n    variables: { postId: id },\n    onCompleted: (data) => {\n      setComments(data.getComments);\n    },\n  });\n\n  const [RemovePostMutation] = useMutation(REMOVE_POST, {\n    refetchQueries: [{ query: GET_ALL_POSTS }],\n    onCompleted: () => {\n      router.push(`/`);\n    },\n  });\n\n  const pushEditPage = () => {\n    router.push(`/edit?id=${id}`);\n  };\n\n  const remove = async () => {\n    await RemovePostMutation({\n      variables: { id: id },\n    });\n  };\n\n  const autoIncreaseHeight = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const { target } = event;\n    target.style.height = `${target.scrollHeight + 2}px`;\n  };\n\n  const handleCommentInput = (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n    const { name, value } = event.target;\n    setComment({ ...comment, [name]: value });\n  };\n\n  const [CreateCommentMutation] = useMutation(CREATE_COMMENT, {\n    refetchQueries: [{ query: GET_COMMENTS, variables: { postId: id } }],\n    awaitRefetchQueries: true,\n    update: (store, { data: { createComment } }) => {\n      const newComments = comments ? [createComment, ...comments] : null;\n      setComments(newComments);\n    },\n    onCompleted: () => {\n      setComment({ name: \"\", password: \"\", contents: \"\", class: 0 });\n    },\n  });\n\n  const registerComment = async () => {\n    const { name, password, contents } = comment;\n    if (!name) {\n      alert(\"닉네임을 입력해주세요.\");\n      return;\n    }\n    if (!password) {\n      alert(\"비밀번호를 입력해주세요.\");\n      return;\n    }\n    if (!contents) {\n      alert(\"댓글 내용을 입력해주세요.\");\n      return;\n    }\n\n    const user = JSON.parse(localStorage.getItem(\"user\") as string);\n    await CreateCommentMutation({\n      variables: { comment, postId: id, email: user && user.email ? user.email : \"\" },\n    });\n  };\n\n  return (\n    <>\n      <Head>\n        <link rel=\"canonical\" href={`https://www.loelblog.com/post/${id}`} />\n        <meta name=\"title\" content={`Loel's Blog ${post ? ` - ` + post.title : \"\"}`} />\n        <meta name=\"description\" content={decodeHTMLForHeader(post ? post.html : \"음식과 여행을 좋아하는 개발자의 블로그 입니다.\")} />\n        <meta property=\"og:title\" content={`Loel's Blog ${post ? ` - ` + post.title : \"\"}`} />\n        <meta property=\"og:type\" content=\"article\" />\n        <meta property=\"og:url\" content={`https://www.loelblog.com/post/${id}`} />\n        <meta property=\"og:description\" content={decodeHTMLForHeader(post ? post.html : \"음식과 여행을 좋아하는 개발자의 블로그 입니다.\")} />\n        <meta property=\"og:image\" content=\"https://images.loelblog.com/thumb/background.jpg\" />\n        <title>{`Loel's Blog ${post ? ` - ` + post.title : \"\"}`}</title>\n      </Head>\n      {post && (\n        <>\n          <PostWrap>\n            <HeadWrap>\n              <Title>{post.title}</Title>\n              <InfoWrap>\n                <Author>{post.email}</Author>\n                <CreatedAt>{dateDisplay(post.updatedAt)}</CreatedAt>\n                {authority && (\n                  <EditWrap>\n                    <Button onClick={pushEditPage} variant={\"warning\"}>\n                      수정\n                    </Button>\n                    <Button onClick={remove} variant={\"danger\"}>\n                      삭제\n                    </Button>\n                  </EditWrap>\n                )}\n              </InfoWrap>\n            </HeadWrap>\n            <ContentWrap className={\"tui-editor-contents\"} dangerouslySetInnerHTML={{ __html: post.html2 ? (post.html2 as string) : (post.html as string) }} />\n          </PostWrap>\n          <CommentRegisterWrap>\n            <TotalComment>댓글 {comments ? comments.length : 0}</TotalComment>\n            <div>\n              <CommentWriterWrap>\n                <CommentWriterInput name={\"name\"} maxLength={40} value={comment.name} onChange={handleCommentInput} placeholder={\"닉네임\"} />\n                <CommentWriterInput name={\"password\"} maxLength={40} value={comment.password} onChange={handleCommentInput} placeholder={\"비밀번호\"} />\n              </CommentWriterWrap>\n              <InputComment name={\"contents\"} value={comment.contents} onChange={handleCommentInput} onInput={autoIncreaseHeight} placeholder={\"댓글을 남겨주세요.\"} />\n              <CommentRegisterButton>\n                <Button variant={\"success\"} width={120} height={40} onClick={registerComment}>\n                  댓글 작성\n                </Button>\n              </CommentRegisterButton>\n            </div>\n          </CommentRegisterWrap>\n          <CommentsWrap>\n            {comments &&\n              comments.length > 0 &&\n              comments.map((item) => {\n                return (\n                  <CommentWrap key={item.id}>\n                    <CommentInfoWrap>\n                      <CommentWriterName>{item.name}</CommentWriterName>\n                      <CommentCreatedAt>{dateDisplay(item.createdAt)}</CommentCreatedAt>\n                    </CommentInfoWrap>\n                    <Comment>{item.contents}</Comment>\n                  </CommentWrap>\n                );\n              })}\n          </CommentsWrap>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default DefaultLayout(Post);\n\nexport async function getStaticPaths() {\n  const { data } = await service.get(\"/post\");\n  const paths = data.map((item: any) => ({\n    params: { id: item.id.toString() },\n  }));\n\n  return {\n    paths,\n    fallback: true,\n  };\n}\n\nexport async function getStaticProps({ params }: any) {\n  const { data } = await service.get(`/post/${params.id}`);\n\n  return { props: { post: data }, revalidate: 1 };\n}\n\nconst Border = css`\n  border: 1px solid #e4e4e4;\n  border-radius: 4px;\n`;\n\nconst PostWrap = styled.section`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 2rem 0;\n`;\n\nconst HeadWrap = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1rem;\n  padding-bottom: 2rem;\n  border-bottom: 1px solid #eee;\n`;\n\nconst Title = styled.h1`\n  font-size: 2.5rem;\n  line-height: 1.5;\n  font-weight: 800;\n  color: #313131;\n  word-break: keep-all;\n  margin-bottom: 2rem;\n`;\n\nconst InfoWrap = styled.div`\n  display: flex;\n  font-size: 1rem;\n`;\n\nconst Author = styled.span`\n  margin-right: 10px;\n  font-weight: 600;\n`;\n\nconst CreatedAt = styled.span``;\n\nconst ContentWrap = styled.article`\n  font-size: 1rem;\n\n  img {\n    display: block;\n    max-width: 768px;\n  }\n`;\n\nconst EditWrap = styled.div`\n  margin-left: auto;\n\n  button + button {\n    margin-left: 0.5rem;\n  }\n`;\n\nconst CommentRegisterWrap = styled.div`\n  padding-bottom: 2rem;\n`;\n\nconst TotalComment = styled.div`\n  margin: 0.5rem 0.5rem 1rem;\n  font-weight: 500;\n`;\n\nconst InputComment = styled.textarea`\n  margin-bottom: 1rem;\n  padding: 0.625rem;\n  width: 100%;\n  min-height: 5rem;\n  font-size: 1rem;\n  line-height: 1.75;\n  ${Border}\n  resize: none;\n`;\n\nconst CommentRegisterButton = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`;\n\nconst CommentsWrap = styled.div`\n  margin: 1.5rem 0 3rem;\n`;\n\nconst CommentWriterWrap = styled.div`\n  margin-bottom: 1rem;\n`;\n\nconst CommentWriterInput = styled.input`\n  margin: 0;\n  padding: 2px 10px;\n  height: 38px;\n  font-size: 1rem;\n  color: #4c4c4c;\n  line-height: 1.2;\n  ${Border}\n\n  + input {\n    margin-left: 1rem;\n  }\n`;\n\nconst CommentWrap = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1.5rem;\n  border-bottom: 1px solid #efefef;\n`;\n\nconst CommentInfoWrap = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-bottom: 1.5rem;\n`;\n\nconst CommentWriterName = styled.div`\n  font-weight: 600;\n  margin-bottom: 5px;\n`;\n\nconst CommentCreatedAt = styled.div`\n  font-size: 0.875rem;\n  color: #8a8a8a;\n`;\n\nconst Comment = styled.div`\n  font-size: 1.2rem;\n  line-height: 1.5;\n`;\n"]},"metadata":{},"sourceType":"module"}