{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styles/styled\";\nimport { css } from \"@emotion/core\";\nimport { Close } from \"styles/Icon\";\nimport { Button } from \"styles\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { LOGIN, REGISTER } from \"@api/User\";\nimport cookie from \"js-cookie\";\nconst menus = [{\n  label: \"Home\",\n  link: \"/\"\n}, {\n  label: \"Edit\",\n  link: \"/edit\",\n  authority: true\n}, {\n  label: \"Menu\",\n  link: \"#\",\n  authority: true\n}, {\n  label: \"Guide\",\n  link: \"/guide\",\n  authority: true\n}, {\n  label: \"Setting\",\n  link: \"/setting\",\n  authority: true\n}];\n\nconst Header = ({\n  authority,\n  authenticated\n}) => {\n  const {\n    0: isTop,\n    1: setIsTop\n  } = useState(true);\n  const {\n    0: loginModal,\n    1: setLoginModal\n  } = useState(false);\n  const {\n    0: registerModal,\n    1: setRegisterModal\n  } = useState(false);\n  const {\n    0: loginInput,\n    1: setLoginInput\n  } = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const {\n    0: registerInput,\n    1: setRegisterInput\n  } = useState({\n    email: \"\",\n    name: \"\",\n    password: \"\"\n  });\n  const [LoginMutation] = useMutation(LOGIN, {\n    onCompleted: data => {\n      cookie.set(\"accessToken\", data.login.token);\n      localStorage.setItem(\"user\", JSON.stringify({\n        email: data.login.email,\n        name: data.login.name\n      }));\n      authenticated(true);\n      setLoginModal(false);\n    }\n  });\n  const [RegisterMutation] = useMutation(REGISTER, {\n    onCompleted: () => {\n      setLoginModal(true);\n      setRegisterModal(false);\n    }\n  });\n  useEffect(() => {\n    const token = cookie.get(\"accessToken\");\n\n    if (token) {\n      authenticated(true);\n    }\n  }, [authority]);\n\n  const handleLoginModal = () => {\n    setLoginModal(false);\n  };\n\n  const handleRegisterModal = () => {\n    if (loginModal && !registerModal) {\n      setLoginModal(false);\n      setRegisterModal(true);\n    } else {\n      setRegisterModal(false);\n    }\n  };\n\n  const changeToRegisterModal = () => {\n    setLoginModal(false);\n    setRegisterModal(true);\n  };\n\n  const changeToLoginModal = () => {\n    setRegisterModal(false);\n    setLoginModal(true);\n  };\n\n  const handleLoginInput = event => {\n    setLoginInput(_objectSpread(_objectSpread({}, loginInput), {}, {\n      [event.target.name]: event.target.value\n    }));\n  };\n\n  const handleRegisterInput = event => {\n    setRegisterInput(_objectSpread(_objectSpread({}, registerInput), {}, {\n      [event.target.name]: event.target.value\n    }));\n  };\n\n  const login = () => {\n    LoginMutation({\n      variables: {\n        loginInput\n      }\n    });\n  };\n\n  const enterLogin = event => {\n    if (event.key === \"Enter\") {\n      login();\n    }\n  };\n\n  const register = () => {\n    RegisterMutation({\n      variables: {\n        registerInput\n      }\n    });\n  };\n\n  useEffect(() => {\n    function isTopZero() {\n      if (window.scrollY === 0) {\n        setIsTop(true);\n      } else {\n        setIsTop(false);\n      }\n    }\n\n    window.addEventListener(\"scroll\", isTopZero);\n    window.addEventListener(\"load\", isTopZero);\n    return () => {\n      window.removeEventListener(\"scroll\", isTopZero);\n      window.removeEventListener(\"load\", isTopZero);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxs(HeaderContainer, {\n    isTop: isTop,\n    children: [/*#__PURE__*/_jsxs(HeaderContentsWrap, {\n      children: [/*#__PURE__*/_jsx(Logo, {}), /*#__PURE__*/_jsx(Center, {}), /*#__PURE__*/_jsx(Menus, {\n        children: menus.map((item, index) => {\n          if (authority) {\n            return /*#__PURE__*/_jsx(Menu, {\n              isTop: isTop,\n              href: item.link,\n              children: /*#__PURE__*/_jsx(MenuName, {\n                children: item.label\n              })\n            }, index);\n          } else {\n            if (!item.authority) {\n              return /*#__PURE__*/_jsx(Menu, {\n                isTop: isTop,\n                href: item.link,\n                children: /*#__PURE__*/_jsx(MenuName, {\n                  children: item.label\n                })\n              }, index);\n            }\n          }\n        })\n      })]\n    }), !authority && /*#__PURE__*/_jsx(ModalButton, {\n      onClick: () => setLoginModal(true),\n      children: \"\\uBC84\\uD2BC\"\n    }), loginModal && /*#__PURE__*/_jsxs(LoginModalContainer, {\n      children: [/*#__PURE__*/_jsx(DarkLayer, {\n        onClick: handleLoginModal\n      }), /*#__PURE__*/_jsxs(LoginModal, {\n        children: [/*#__PURE__*/_jsxs(LoginModalHeader, {\n          children: [\"\\uB85C\\uADF8\\uC778\", /*#__PURE__*/_jsx(CloseButton, {\n            onClick: handleLoginModal,\n            children: /*#__PURE__*/_jsx(Close, {\n              width: 20,\n              height: 20,\n              color: \"#313131\"\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(LoginModalBody, {\n          children: [/*#__PURE__*/_jsx(LoginInputWrap, {\n            children: /*#__PURE__*/_jsx(LoginInput, {\n              name: \"email\",\n              placeholder: \"이메일\",\n              onChange: handleLoginInput\n            })\n          }), /*#__PURE__*/_jsx(LoginInputWrap, {\n            children: /*#__PURE__*/_jsx(LoginInput, {\n              name: \"password\",\n              type: \"password\",\n              placeholder: \"비밀번호\",\n              onChange: handleLoginInput,\n              onKeyPress: enterLogin\n            })\n          }), /*#__PURE__*/_jsx(LoginButtonWrap, {\n            children: /*#__PURE__*/_jsx(Button, {\n              width: \"100%\",\n              height: 48,\n              variant: \"danger\",\n              onClick: login,\n              children: \"\\uB85C\\uADF8\\uC778\"\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(LoginModalFooter, {\n          children: [\"\\uACC4\\uC815\\uC774 \\uC5C6\\uB2E4\\uBA74? \", /*#__PURE__*/_jsx(Register, {\n            onClick: changeToRegisterModal,\n            children: \"\\uD68C\\uC6D0\\uB4F1\\uB85D\"\n          })]\n        })]\n      })]\n    }), registerModal && /*#__PURE__*/_jsxs(LoginModalContainer, {\n      children: [/*#__PURE__*/_jsx(DarkLayer, {\n        onClick: handleRegisterModal\n      }), /*#__PURE__*/_jsxs(LoginModal, {\n        children: [/*#__PURE__*/_jsxs(LoginModalHeader, {\n          children: [\"\\uD68C\\uC6D0\\uB4F1\\uB85D\", /*#__PURE__*/_jsx(CloseButton, {\n            onClick: handleRegisterModal,\n            children: /*#__PURE__*/_jsx(Close, {\n              width: 20,\n              height: 20,\n              color: \"#313131\"\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(LoginModalBody, {\n          children: [/*#__PURE__*/_jsx(LoginInputWrap, {\n            children: /*#__PURE__*/_jsx(LoginInput, {\n              name: \"email\",\n              placeholder: \"이메일\",\n              onChange: handleRegisterInput\n            })\n          }), /*#__PURE__*/_jsx(LoginInputWrap, {\n            children: /*#__PURE__*/_jsx(LoginInput, {\n              name: \"name\",\n              placeholder: \"이름\",\n              onChange: handleRegisterInput\n            })\n          }), /*#__PURE__*/_jsx(LoginInputWrap, {\n            children: /*#__PURE__*/_jsx(LoginInput, {\n              name: \"password\",\n              type: \"password\",\n              placeholder: \"비밀번호\",\n              onChange: handleRegisterInput\n            })\n          }), /*#__PURE__*/_jsx(LoginButtonWrap, {\n            children: /*#__PURE__*/_jsx(Button, {\n              width: \"100%\",\n              height: 48,\n              variant: \"danger\",\n              onClick: register,\n              children: \"\\uD68C\\uC6D0\\uB4F1\\uB85D\"\n            })\n          })]\n        }), /*#__PURE__*/_jsx(LoginModalFooter, {\n          children: /*#__PURE__*/_jsx(Register, {\n            onClick: changeToLoginModal,\n            children: \"\\uB85C\\uADF8\\uC778\"\n          })\n        })]\n      })]\n    })]\n  });\n};\n\nexport default Header;\nconst WhiteBackground = css`\n  background-color: #fff;\n`;\nconst HeaderContainer = styled.header`\n  position: ${p => p.isTop ? \"absolute\" : \"fixed\"};\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 80px;\n  ${p => !p.isTop && WhiteBackground}\n  color: ${p => p.isTop ? \"#fff\" : \"#000\"};\n  border-bottom: ${p => !p.isTop && \"1px solid #eee\"};\n  box-shadow: ${p => !p.isTop && \"rgba(0, 0, 0, 0.08) 0px 1px 12px\"};\n  z-index: 100;\n\n  ::before {\n    background-image: ${p => p.isTop ? \"linear-gradient(to bottom, #000, rgba(0, 0, 0, 0))\" : \"linear-gradient(rgb(0, 0, 0), rgba(0, 0, 0, 0))\"};\n    content: \"\";\n    height: 140%;\n    left: 50%;\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    max-width: 1440px;\n    width: 100%;\n    z-index: 0;\n    transform: translateX(-50%);\n    transition: 150ms opacity ease;\n    opacity: ${p => p.isTop ? \"0.4\" : \"0\"};\n  }\n`;\nconst HeaderContentsWrap = styled.div`\n  display: flex;\n  align-items: center;\n  max-width: 1440px;\n  width: 100%;\n  height: 100%;\n  margin: 0 auto;\n  padding: 0 80px;\n  font-weight: 400;\n`;\nconst Logo = styled.div`\n  flex: 1 0 140px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  z-index: 1;\n`;\nconst Center = styled.div`\n  flex: 1 0 200px;\n  display: flex;\n  align-items: center;\n  z-index: 1;\n`;\nconst Menus = styled.nav`\n  flex: 1 0 auto;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  z-index: 1;\n`;\nconst Menu = styled.a`\n  position: relative;\n  padding: 12px;\n  font-size: 1rem;\n  user-select: none;\n\n  ::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    right: -3px;\n    bottom: 0;\n    left: -3px;\n    border-radius: 22px;\n  }\n\n  :hover::before {\n    ${p => p.isTop ? \"background: rgba(255, 255, 255, 0.15)\" : \"background: rgb(247, 247, 247)\"};\n  }\n`;\nconst MenuName = styled.div`\n  position: relative;\n`;\nconst ModalButton = styled.button`\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: 10px;\n  height: 10px;\n  opacity: 0;\n  cursor: none;\n`;\nconst LoginModalContainer = styled.div``;\nconst DarkLayer = styled.div`\n  position: fixed;\n  inset: 0;\n  z-index: 10;\n  background: rgba(0, 0, 0, 0.5);\n`;\nconst LoginModal = styled.div`\n  position: fixed;\n  top: 50%;\n  left: calc(50% - 20px);\n  display: flex;\n  flex-direction: column;\n  margin: 0 20px;\n  width: 80%;\n  max-width: 568px;\n  max-height: 100%;\n  color: #000;\n  background-color: #fff;\n  border-radius: 12px;\n  box-shadow: rgba(0, 0, 0, 0.28) 0 8px 28px;\n  transform: translate(-50%, -50%);\n  z-index: 15;\n`;\nconst LoginModalHeader = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 4rem;\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: #313131;\n  border-bottom: 1px solid #e7e7e7;\n`;\nconst CloseButton = styled.div`\n  position: absolute;\n  right: 1rem;\n  display: inline-flex;\n  cursor: pointer;\n`;\nconst LoginModalBody = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 1.5rem;\n  border-bottom: 1px solid #e7e7e7;\n`;\nconst LoginInputWrap = styled.div`\n  padding: 0.5rem 0;\n`;\nconst LoginInput = styled.input`\n  margin: 0;\n  padding: 1rem 1rem;\n  width: 100%;\n  border: 1px solid #e7e7e7;\n  border-radius: 4px;\n`;\nconst LoginButtonWrap = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: 1rem;\n`;\nconst LoginModalFooter = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 1rem 1.5rem;\n`;\nconst Register = styled.span`\n  margin-left: 0.5rem;\n  font-weight: 500;\n  color: #3469d3;\n  cursor: pointer;\n\n  :hover {\n    text-decoration: underline;\n  }\n`;","map":null,"metadata":{},"sourceType":"module"}